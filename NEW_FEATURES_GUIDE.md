# 🆕 새로운 기능 가이드 (v1.1)

## 📌 4가지 주요 개선사항

카드뉴스 생성기가 더 사용하기 쉬워졌습니다! 이 가이드는 새로운 기능들을 설명합니다.

---

## 1️⃣ 폼 기반 기획안 편집기

### 기존 방식 (JSON 직접 수정) ❌
```json
{
  "structure_type": "MULTI",
  "plan": {
    "cover": { "main_title": "...", "sub_title": "..." },
    "body": [ { "page": 1, "summary": [...] } ],
    "outro": { "contact": "..." }
  },
  "estimated_tone": "..."
}
```
**문제점**: 비개발자가 이해하기 어려움, JSON 형식 오류 위험

### 새로운 방식 (폼 기반 편집) ✅
```
🎯 표지 (COVER)
┌─ 메인 제목: [____________________________]
└─ 부제목:   [____________________________]

📐 구조 설정
┌─ 구조 유형:    [SINGLE ▼]
└─ 예상 톤:      [______________________]

📝 본문 (BODY)
┌─ 페이지 1:
│  [________________________]
│  [________________________]
│  [________________________]
│
└─ 페이지 2:
   [________________________]
   [________________________]

👋 마무리 (OUTRO)
└─ 연락처: [____________________________]

[💾 수정사항 저장] [🔄 취소]
```

### 사용 방법
```
1. STEP 1에서 공고문으로 기획안 생성
2. 기획안 결과 보기
   ├─ "📖 보기" 탭: 읽기 형식으로 확인
   ├─ "⚙️ JSON 원본" 탭: 원본 JSON 확인 (수정 불가)
   └─ "✏️ 수정" 탭: 폼으로 편집 ← 새로워진 부분!
3. 각 필드를 마우스로 클릭해서 수정
4. "💾 수정사항 저장" 클릭
5. STEP 2에서 수정된 기획안으로 이미지 생성
```

### 팁
- ✅ 각 필드는 독립적으로 수정 가능
- ✅ 리스트가 필요한 경우 줄바꿈(\n)으로 분리
- ✅ 텍스트 길이 제한 없음
- ❌ JSON 문법 걱정 불필요

---

## 2️⃣ 개선된 로그 포맷팅

### 이전 로그 출력 ❌
```
[14:23:45] 기획 프로세스 시작[14:23:46] 유사 스타일 검색 중[14:23:47] AI가 기획안을 작성 중입니다[14:24:10] 기획안이 완성되었습니다
```
**문제점**: 줄이 붙어있어서 가독성이 떨어짐

### 새로운 로그 출력 ✅
```
[14:23:45] 🚀 [STEP 1] 기획 프로세스 시작...
[14:23:45] ============================================================
[14:23:45]   📚 유사 스타일 검색 중...
[14:23:46]     ✅ 임베딩 생성 완료
[14:23:47]     ✅ 유사도 검색 완료: 3개 결과
[14:23:47]   🧠 AI가 기획안을 작성 중입니다...
[14:24:10]   ✅ 응답 파싱 완료
[14:24:10] ============================================================
[14:24:10] 🎉 [성공] 기획안이 완성되었습니다!
[14:24:10] ============================================================
```

### 로그의 특징
- ✅ **명확한 구조**: 작업 단계별로 들여쓰기됨
- ✅ **이모지 사용**: 상태를 시각적으로 표현 (🚀 시작, ✅ 완료, ⚠️ 경고, ❌ 오류)
- ✅ **시간 표시**: 각 로그의 타임스탬프 [HH:MM:SS]
- ✅ **더 많은 메시지**: 최근 100개 로그 표시 (이전: 50개)
- ✅ **스크롤 가능**: 로그 박스가 자동으로 스크롤

### 예시 해석
```
[14:23:45] 🚀 [STEP 1] 기획 프로세스 시작...
           ↓         ↓ 단계 표시
        시간 스탭트 표시

[14:23:45]   📚 유사 스타일 검색 중...
           ↓ 들여쓰기 = 하위 작업임을 의미
```

---

## 3️⃣ 통합 로그 뷰

### 이전 구조 ❌
```
STEP 1 섹션
├─ 파일 업로드
├─ 기획안 생성
└─ 📋 로그 표시 ← 여기서만 STEP 1 로그

STEP 2 섹션
├─ 비율 선택
├─ 디자인 생성
└─ 📋 로그 표시 ← 여기서만 STEP 2 로그
```
**문제점**: 로그가 분산되어 전체 흐름을 파악하기 어려움

### 새로운 구조 ✅
```
STEP 1 섹션
├─ 파일 업로드
└─ 기획안 생성

STEP 2 섹션
├─ 비율 선택
└─ 디자인 생성

📋 실행 로그 (페이지 하단 - 통합)
├─ STEP 1의 모든 로그
├─ STEP 2의 모든 로그
└─ 최근 100개 메시지
```

### 사용 방법
```
1. 페이지를 아래로 스크롤
2. "📋 실행 로그" 섹션 찾기
3. STEP 1 → STEP 2의 전체 작업 흐름 추적
4. 필요시 로그를 스크롤해서 더 많은 메시지 확인
```

### 장점
- ✅ 한 곳에서 전체 과정 추적
- ✅ 문제 발생 시 원인 파악 용이
- ✅ 페이지 새로고침해도 로그 유지 (세션 저장)
- ✅ 자동 스크롤: 최신 메시지가 항상 보임

---

## 4️⃣ 대화형 페이지별 생성 (가장 큰 변화!)

### 이전 방식 ❌
```
[🎨 AI 디자인 생성 시작] ← 클릭

(COVER, BODY1, BODY2, OUTRO 모두 자동 생성)
(5~15분 대기... 진행 바 표시)

[완료] ← 모든 이미지가 한번에 생성됨
```
**문제점**: 기다리는 시간이 길고, 특정 페이지만 다시 생성하기 어려움

### 새로운 방식 ✅
```
Step 1️⃣: 비율 선택
   [4:5 (인스타그램)]  ← 선택
   [1:1 (정방형)]
   [9:16 (릴스/스토리)]
   [🎨 AI 디자인 생성 시작]

Step 2️⃣: 시작 페이지 선택 ← 새로운 기능!
   [몇 페이지부터 생성할까요? ▼] [1]
                                  [▶️ 생성 시작]

Step 3️⃣: 페이지별 생성
   [📄 페이지 1/4 생성] ← 1장씩 생성

   (1장만 생성... 1~3분 대기)

   📸 생성된 페이지
   [이미지 표시] [📥 다운로드]

Step 4️⃣: 사용자 선택 ← 가장 편한 부분!
   ❓ 다음 어떻게 하시겠어요?
   [➡️ 다음 페이지만]    ← 페이지 2만 생성
   [⏭️ 모두 생성하기]     ← 3,4번 자동 생성
   [⏹️ 중단하기]           ← 지금 멈추고 최종 결과 보기

Step 5️⃣: 최종 결과
   📸 모든 생성된 이미지
   [페이지 1] [다운로드]
   [페이지 2] [다운로드]
   [페이지 3] [다운로드]
   [페이지 4] [다운로드]
```

### 3가지 시나리오

#### 시나리오 1️⃣: 천천히 한 장씩 (안전한 방식)
```
[📄 페이지 1 생성] → [➡️ 다음 페이지만]
→ [📄 페이지 2 생성] → [➡️ 다음 페이지만]
→ [📄 페이지 3 생성] → [⏭️ 모두 생성하기]
→ [📄 페이지 4 생성] → [완료]
```
✅ 각 단계에서 결과를 확인하고 진행

#### 시나리오 2️⃣: 빠르게 모두 생성 (빠른 방식)
```
[📄 페이지 1 생성] → [⏭️ 모두 생성하기]
→ (페이지 2, 3, 4 자동 생성 중)
→ [완료]
```
✅ 처음부터 끝까지 자동 진행

#### 시나리오 3️⃣: 중간에 중단 (유연한 방식)
```
[📄 페이지 1 생성] → 결과 확인
→ [⏹️ 중단하기]
→ [최종 결과: 페이지 1만 표시]
```
✅ 필요한 만큼만 생성

### 각 선택지 설명

| 버튼 | 설명 | 용도 |
|------|------|------|
| ➡️ 다음 페이지만 | 다음 페이지 1장만 생성 | 한 장씩 확인하며 진행 |
| ⏭️ 모두 생성하기 | 남은 페이지 자동 생성 | 빠르게 모두 완성 |
| ⏹️ 중단하기 | 생성 중단, 지금까지 결과만 사용 | 비용 절감, 시간 단축 |

### 사용 팁
```
💡 팁 1: 처음 사용자는 "다음 페이지만"으로 시작
   → 각 단계를 이해하고 진행

💡 팁 2: 시간이 중요하면 "모두 생성하기" 선택
   → 3초 대기로 서버 과부하 방지

💡 팁 3: 페이지 1(표지)만 먼저 생성
   → 톤앤매너 확인 후 나머지 생성

💡 팁 4: 실패한 페이지는 건너뛰고 계속
   → "다음 페이지만"으로 다른 페이지 생성
   → 나중에 실패한 페이지만 다시 생성
```

---

## 🎯 빠른 시작 (5분)

### 전체 흐름
```bash
# 1. 앱 실행
streamlit run app.py

# 2. 새 탭에서 http://localhost:8501 접속
```

### STEP 1: 기획안 생성
```
1. 좌측 사이드바에 API Key 입력
2. "📄 공고문 업로드" → TXT/PDF 선택
3. "간단하게" 또는 "자세하게" 선택
4. "✨ AI 기획 시작" 클릭
5. 결과 화면에서:
   - "📖 보기" 탭: 읽기 형식 확인
   - "✏️ 수정" 탭: 📝 새로운 폼으로 편집!
   - 폼의 필드들을 수정하고 "💾 저장"
```

### STEP 2: 새로운 페이지별 생성
```
1. "📐 비율 선택" (기본: 4:5)
2. "🎨 AI 디자인 생성 시작" 클릭
3. 시작 페이지 입력 (기본: 1)
4. "▶️ 생성 시작" 클릭
5. 페이지 1 생성 시작... ⏳
6. 결과 표시 후:
   - "➡️ 다음 페이지만" → 페이지 2 생성
   - 또는 "⏭️ 모두 생성하기" → 자동 생성
7. 최종 결과에서 모든 이미지 다운로드

📋 아래쪽 "실행 로그"에서 전체 과정 추적 ✅
```

---

## ❓ FAQ

### Q1: 폼에서 여러 줄 입력하는 방법?
**A**: 큰 텍스트 박스에서 엔터(\n)로 줄바꿈
```
예시 (본문 페이지 요약):
첫 번째 요점
두 번째 요점
세 번째 요점
```

### Q2: 폼 편집 중 실수하면?
**A**: "🔄 취소" 버튼으로 돌아가기
- 저장하기 전까지는 원본 유지

### Q3: 페이지 생성 중 오류 발생하면?
**A**: "➡️ 다음 페이지만" 선택해서 계속 진행
- 실패한 페이지는 나중에 다시 시도

### Q4: 로그가 너무 많으면?
**A**: 자동으로 최근 100개만 표시
- 스크롤해서 더 확인 가능

### Q5: 페이지 1(표지)부터 시작해야 하나?
**A**: 아니요, 원하는 페이지부터 시작 가능
```
예) "2번 페이지부터 생성" 입력 후 시작
→ 페이지 2, 3, 4만 생성 가능
```

---

## 📊 성능 개선 비교

| 항목 | 이전 | 현재 | 개선 |
|------|------|------|------|
| 기획안 편집 방식 | JSON 직접 수정 | 폼 기반 | ✅ 쉬워짐 |
| 로그 가독성 | 붙어있음 | 구조화됨 | ✅ 명확 |
| 로그 통합도 | 분산 표시 | 통합 표시 | ✅ 단순화 |
| 생성 유연성 | 전부 or 무 | 선택 가능 | ✅ 유연해짐 |
| 사용자 제어 | 낮음 | 높음 | ✅ 향상됨 |

---

## 🚀 시작하기

```bash
# 1. 현재 디렉토리 확인
cd "c:\\Users\\a\\Desktop\\작업파일(디자인, AI 등)\\251130-2 카드뉴스 생성기 웹앱 구축"

# 2. 의존성 설치 (이미 설치됨)
pip install -r requirements.txt

# 3. 앱 실행
streamlit run app.py

# 4. 브라우저에서 http://localhost:8501 접속
```

---

**준비 완료!** 🎉 새로운 기능들을 즐겨보세요!

생성일: 2025-11-30
버전: v1.1
